"use strict";(self.webpackChunk_infuseai_piperider_ui=self.webpackChunk_infuseai_piperider_ui||[]).push([[385],{55624:function(e,n,t){t.d(n,{B:function(){return u}});var i=t(82175),r=t(37932),a=t(89755),o=t(3964),l=t(75616),s=t(18321),c=t(78391),d=["title","children","allowModalPopup"];function u(e){var n=e.title,t=e.children,u=e.allowModalPopup,h=(0,r.Z)(e,d),x=(0,a.qY)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.kC,(0,i.Z)((0,i.Z)({bg:"whiteAlpha.700",rounded:"md",onClick:function(){return u&&x.onOpen()}},h),{},{children:t})),u&&(0,c.jsx)(s.W,(0,i.Z)((0,i.Z)({},x),{},{size:"full",title:n,footer:(0,c.jsx)(o.kC,{mt:6,w:"100%",direction:"row",justify:"center",children:(0,c.jsx)(l.zx,{colorScheme:"blue",mr:3,onClick:x.onClose,children:"Close"})}),children:t}))]})}},94182:function(e,n,t){t.d(n,{UZ:function(){return x}});var i=t(82175),r=t(51062),a=t(41893),o=t(4726),l=t(63831),s=t(22513),c=t(32030),d=t(71155),u=t(78391),h="#4780A8";function x(e){var n=e.quantileData,t=e.animation,x=void 0!==t&&t;(0,d.Z)(),r.kL.register(a.LU,a.aS,r.f$,r.uw);var m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object.assign({},n),r=(0,s.uB)(e),a=r.max,o=r.min,d=r.mean,u=r.q1,x=r.q3,m=[{text:"box region",fillStyle:c.k8},{text:"p50",fillStyle:h}];return(0,i.Z)({responsive:!0,maintainAspectRatio:!1,layout:{padding:10},indexAxis:"y",scales:{x:{offset:!0},y:{display:!1}},plugins:{legend:{position:"bottom",labels:{boxHeight:10,boxWidth:10,padding:15,generateLabels:function(){return m.map((function(e){return{lineWidth:0,text:e.text,fillStyle:e.fillStyle}}))}}},tooltip:{callbacks:{label:function(){var e=(0,l.J8)(o),n=(0,l.J8)(a),t=(0,l.J8)(d),i=(0,l.J8)(u),r=(0,l.J8)(x);return"MIN: ".concat(e," / P25: ").concat(i," / P50 (median): ").concat(t," / P75: ").concat(r," / MAX: ").concat(n)}}}}},t)}(n,{animation:x}),f=function(e){var n=(0,s.uB)(e),t=n.max,i=n.min,r=n.mean,a=n.q1,o=n.q3;return{labels:[""],datasets:[{data:[{min:i,q1:a,mean:r,q3:o,max:t,median:r,items:[],outliers:[]}],borderWidth:1,itemRadius:1,medianColor:h,meanBackgroundColor:h,backgroundColor:c.k8,borderColor:c.Q,hitPadding:10}]}}(n);return(0,u.jsx)(o.kL,{type:"boxplot",data:f,options:m,plugins:[r.De,r.u]},Date.now())}},54005:function(e,n,t){t.d(n,{$:function(){return U}});var i=t(3964),r=t(23397),a=t(24892),o=t(61431),l=t(98536),s=t(45035),c=t(75616),d=t(92729),u=t(25126),h=t(40485),x=t(60767),m=t(25599),f=t(5665),g=t(64138),p=t(45809),v=t(78391);function j(e){var n=e.items,t=e.singleOnly,r=(0,x.useState)(0),a=(0,o.Z)(r,2)[1],l=(0,m.TH)(),s=(0,o.Z)(l,2),c=s[0],d=s[1];if(!n)return(0,v.jsx)(v.Fragment,{});var u=function e(n){var t,i,r=(0,h.Z)(null!==(t=null===n||void 0===n?void 0:n.items)&&void 0!==t?t:[]);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.changeStatus)return!0;if(e(a))return!0}}catch(o){r.e(o)}finally{r.f()}return!1},j=function e(n){var r=n.type,o=n.name,l=n.items;if("folder"!==n.type||n.items&&0!==n.items.length){var s=!!n.expanded,h=l&&l.length>0,x=s?g.bTu:g.Tfp,m=n.changeStatus,j=!1;s||m||!u(n)||(m="modified");var b=(0,p.Mr)(m),y=b.icon,C=b.color,S=g.QoU,k=(0,p.yk)(r).icon;if(k)S=k;else if("database"===r)S=g.bGz;else if("schema"===r)S=g.QoU;else if("table"===r)S=g.aCJ;else if(r.startsWith("column_")){var O=r.slice("column_".length);S=(0,p.MM)(O).icon}else"metric_list"===r?S=f.NMh:"test_list"===r?S=g._rq:"overview"===r&&(S=f.xng);var w,Z=n.path===c;if("model"===r||"table"===r||"source"===r||"seed"===r)j=0===(null!==(w=n.items)&&void 0!==w?w:[]).length;return(0,v.jsxs)(i.HC,{children:[(0,v.jsxs)(i.kC,{_hover:{bg:Z?"piperider.400":"gray.100"},rounded:"md",cursor:"pointer",fontSize:"sm",color:Z?"white":j?"gray":"inherit",bg:Z?"piperider.400":"inherit",onClick:function(){!function(e){e.items&&e.items.length>0&&(e.expanded=!e.expanded,a((function(e){return e+1}))),e.path&&d(e.path)}(n)},alignItems:"center",px:2,children:[(0,v.jsx)(i.DE,{as:x,visibility:h?"visible":"hidden"}),(0,v.jsx)(i.DE,{as:S,mr:1}),(0,v.jsx)(i.xv,{flex:1,children:o}),!t&&m&&(0,v.jsx)(i.DE,{as:y,color:Z?"white":C})]}),s&&l&&l.length>0&&(0,v.jsx)(i.aV,{ml:4,spacing:1,my:1,children:l.map((function(n){return e(n)}))})]},o)}};return(0,v.jsx)(i.aV,{spacing:2,children:n.map((function(e){return j(e)}))})}var b=t(11060),y=t(82175),C=t(78983),S=t(808),k=t(54732),O=(t(29936),t(89755)),w=t(8429),Z=t(80009),_=t(1923),T="darkorange",z=t(64959);var F=t(75607),A=t(90197),D=t(90467),E=t(96342),I=t(38511);function M(e){var n=e.params,t=function(){if("undefined"!==typeof window)return window}(),i=(0,O.VP)(""),r=i.onCopy,a=i.setValue,o=i.hasCopied;return(0,x.useEffect)((function(){var e,i=null===t||void 0===t||null===(e=t.location)||void 0===e?void 0:e.href;i&&(i&&i.includes("#")&&(i=i.split("#")[0]),a("".concat(i,"#/?").concat(n.toString())))}),[t,n,a]),(0,v.jsx)(c.zx,{variant:"outline",colorScheme:"gray",size:"sm",onClick:r,children:o?"Copied":"Copy URL"})}var H={customNode:function(e){e.selected;var n,t,r,a,o,l,c=e.data,d=c.singleOnly,u=c.stat,h=c.isSelected,x=c.isHighlighted,m=(0,C.oR)((function(e){return e.transform[2]>.3})),f=null===c||void 0===c?void 0:c.type,g=!1,j=(0,p.yk)(f),b=j.color,y=j.icon;"source"!==f&&"seed"!==f&&"model"!==f||(g=void 0===(null===(r=null!==(o=c.target)&&void 0!==o?o:c.base)||void 0===r||null===(a=r.__table)||void 0===a?void 0:a.row_count));var S,k=c.changeStatus,O="inherit",w="inherit",_="solid",F=h?"gray.300":"gray.200";d||(S=(0,p.Mr)(k).icon,O=(0,p.Mr)(k).color,F=k?O:F,"added"===k?(l="added",_="dashed"):"modified"===k?l="modified":"implicit"===k?l="implicit":"removed"===k?(l="removed",_="dashed"):O=g?"gray":"black");var A=1,D=O,E="unset";h||(A=1,D="gray.200"),x&&(A=1,D=T,E="0px 5px 15px #00000040");var I=null===c||void 0===c?void 0:c.name,M=(0,z.k)({base:null===c||void 0===c?void 0:c.base,target:null===c||void 0===c?void 0:c.target,stat:u}),H=M.statValue,L=M.statValueF;return(0,v.jsx)(Z.u,{label:"model"===f?I:"".concat(I," (").concat(f,")"),placement:"top",children:(0,v.jsxs)(i.kC,{width:"300px",_hover:{backgroundColor:"gray.100"},borderColor:D,borderWidth:A,borderStyle:_,backgroundColor:m?"white":F,borderRadius:3,boxShadow:E,padding:0,children:[(0,v.jsx)(i.kC,{backgroundColor:h?b:"gray.100",padding:2,borderRightWidth:A,borderColor:D,borderStyle:_,alignItems:"top",visibility:m?"inherit":"hidden",children:(0,v.jsx)(s.JO,{as:y})}),(0,v.jsxs)(i.gC,{flex:"1 0 auto",mx:"1",width:"100px",children:[(0,v.jsxs)(i.kC,{width:"100%",textAlign:"left",flex:"1",fontWeight:w,p:1,alignItems:"center",visibility:m?"inherit":"hidden",children:[(0,v.jsx)(i.xu,{flex:"1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:h?"inherit":"gray.400",children:I}),!d&&k&&(0,v.jsx)(Z.u,{label:l,children:(0,v.jsx)(i.kC,{children:(0,v.jsx)(s.JO,{color:O,as:S,fontWeight:w,flex:"0 0 20px"})})})]}),u&&void 0!==H&&(0,v.jsx)(i.xu,{width:"100%",visibility:m?"inherit":"hidden",children:(0,v.jsx)(i.xv,{textAlign:"right",fontSize:"sm",color:"inherit",children:d?(0,v.jsx)(v.Fragment,{children:L}):(0,v.jsx)(z.h,{base:null===c||void 0===c?void 0:c.base,target:null===c||void 0===c?void 0:c.target,stat:u,isActive:false,negativeChange:"execution_time"===u})})})]}),Object.keys(null!==(n=null===c||void 0===c?void 0:c.dependsOn)&&void 0!==n?n:{}).length>0&&(0,v.jsx)(C.HH,{type:"target",position:C.Ly.Left,isConnectable:!1}),Object.keys(null!==(t=null===c||void 0===c?void 0:c.children)&&void 0!==t?t:{}).length>0&&(0,v.jsx)(C.HH,{type:"source",position:C.Ly.Right,isConnectable:!1})]})})},customGroup:function(e){var n=e.data;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(i.kC,{style:{height:"100%",position:"relative",backgroundColor:"#B3B3B340",borderRadius:"5px"},children:(0,v.jsx)("label",{style:{position:"absolute",bottom:0,right:0,textAlign:"right",margin:"5px"},children:n.label})})})}},L={customEdge:function(e){var n=e.sourceX,t=e.sourceY,i=e.targetX,r=e.targetY,a=e.sourcePosition,l=e.targetPosition,s=e.style,c=void 0===s?{}:s,d=e.markerEnd,u=e.data,h=(0,y.Z)({},c);h.storke="gray",null!==u&&void 0!==u&&u.singleOnly||(null!==u&&void 0!==u&&u.from.includes("target")?null!==u&&void 0!==u&&u.from.includes("base")||(h.stroke="#1a7f37",h.strokeDasharray="5"):(h.stroke="#cf222e",h.strokeDasharray="5")),null!==u&&void 0!==u&&u.isHighlighted&&(h.stroke=T);var x=(0,C.OQ)({sourceX:n,sourceY:t,sourcePosition:a,targetX:i,targetY:r,targetPosition:l}),m=(0,o.Z)(x,1)[0];return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(C.u5,{path:m,markerEnd:d,style:(0,y.Z)((0,y.Z)({},h),c)})})}},B={"":"No Stat",execution_time:"Execution Time",row_count:"Row Count"},N={all:"All nodes",impacted:"Impacted","impacted+":"Impacted+"};function R(e){var n,t=e.singleOnly,r=(0,C._K)(),a=u.n.getState().lineageGraph,l=void 0===a?{}:a,s=(0,C.Rr)([]),d=(0,o.Z)(s,3),h=d[0],f=d[1],g=d[2],p=(0,C.ll)([]),j=(0,o.Z)(p,3),T=j[0],z=j[1],R=j[2],P=(0,m.TH)(),W=(0,o.Z)(P,2)[1],q=(0,I.KZ)(),U=(0,x.useState)(),V=(0,o.Z)(U,2),G=V[0],K=V[1],Q=(0,x.useState)([]),Y=(0,o.Z)(Q,2),X=Y[0],$=Y[1],ee=(0,x.useState)([]),ne=(0,o.Z)(ee,2),te=ne[0],ie=ne[1],re=(0,x.useState)(q.get("g_s")||""),ae=(0,o.Z)(re,2),oe=ae[0],le=ae[1],se=(0,x.useState)("impacted+"),ce=(0,o.Z)(se,2),de=ce[0],ue=ce[1],he=(0,x.useState)("impacted"),xe=(0,o.Z)(he,2),me=xe[0],fe=xe[1],ge=(0,O.qY)(),pe=ge.isOpen,ve=ge.onOpen,je=ge.onClose,be=(0,O.qY)(),ye=be.isOpen,Ce=be.onOpen,Se=be.onClose,ke=(0,O.qY)(),Oe=ke.isOpen,we=ke.onOpen,Ze=ke.onClose,_e=(0,x.useState)([0,0]),Te=(0,o.Z)(_e,2),ze=Te[0],Fe=Te[1],Ae=(0,x.useState)(),De=(0,o.Z)(Ae,2),Ee=De[0],Ie=De[1];(0,D.m)({eventName:E.FP.PAGE_VIEW,eventProperties:{type:t?E.ll:E.bB,page:"lineage-graph"}});var Me=q.get("g_s"),He=q.get("g_ci");(0,x.useEffect)((function(){Me&&le(Me)}),[Me]),(0,x.useEffect)((function(){He&&ue(He)}),[He]);var Le=new URLSearchParams;Le.append("g_v","1"),Le.append("g_s",oe),t||Le.append("g_ci",de);var Be=(0,x.useMemo)((function(){var e=new Set(Object.keys(l)),n=(0,A.ud)(l),t=(0,A.pT)(l),i=(0,A._e)(l,Array.from(n));return{all:e,changed:t,impacted:i,impactedPlus:(0,A.OA)(i,(0,A.cr)(l,Array.from(n),1))}}),[l]),Ne=(0,x.useCallback)((function(e,n){var i=(0,A.jh)(l,e,n,{nodeOverrides:{singleOnly:t||!1,isHighlighted:!1,stat:oe},edgeOverrides:{singleOnly:t||!1}}),a=i.nodes,o=i.edges;f(a),z(o),setTimeout((function(){return r.fitView({maxZoom:1})}),0)}),[l,t,oe,f,z,r]);return(0,x.useEffect)((function(){var e=Be.all,n=Be.all;G?(e=new Set,G&&(e=(0,A.OA)((0,A._e)(l,[G]),(0,A.cr)(l,[G])))):t||("impacted"===de?e=Be.impacted:"impacted+"===de&&(e=Be.impactedPlus),"impacted"===me?n=Be.impacted:"changed"===me&&(n=Be.changed)),e=(0,A.OA)(e,(0,A.cr)(l,X,1),(0,A._e)(l,te,1)),Ne(e,n)}),[l,de,me,oe,G,X,te,Be,t,Ne]),(0,v.jsxs)(i.kC,{flexDirection:"column",style:{width:"100%",height:"calc(100vh - 160px)"},children:[(0,v.jsx)(i.xu,{flex:"1",children:(0,v.jsxs)(C.x$,{nodes:h,edges:T,nodeTypes:H,edgeTypes:L,onClick:function(){je(),Se(),Ze()},onNodesChange:g,onEdgesChange:R,onNodeMouseEnter:function(e,n){return function(e){Ze();var n=(0,A.OA)((0,A.cr)(l,[e.id]),(0,A._e)(l,[e.id])),t=new Set(T.filter((function(e){return n.has(e.source)&&n.has(e.target)})).map((function(e){return e.id})));z(T.map((function(e){return t.has(e.id)?(0,y.Z)((0,y.Z)({},e),{},{data:(0,y.Z)((0,y.Z)({},e.data),{},{isHighlighted:!0})}):e}))),f(h.map((function(e){return n.has(e.id)?(0,y.Z)((0,y.Z)({},e),{},{data:(0,y.Z)((0,y.Z)({},e.data),{},{isHighlighted:!0})}):e})))}(n)},onNodeMouseLeave:function(){return z(T.map((function(e){return(0,y.Z)((0,y.Z)({},e),{},{data:(0,y.Z)((0,y.Z)({},e.data),{},{isHighlighted:!1})})}))),void f(h.map((function(e){return(0,y.Z)((0,y.Z)({},e),{},{data:(0,y.Z)((0,y.Z)({},e.data),{},{isHighlighted:!1})})})))},onContextMenu:function(e){e.preventDefault(),Fe([e.pageX,e.pageY]);var n=e.target.closest(".react-flow__node");if(n){var t,i=null===n||void 0===n||null===(t=n.dataset)||void 0===t?void 0:t.id;Ie(i)}else Ie(void 0);we()},minZoom:.1,fitView:!0,children:[(0,v.jsx)(S.Z,{showInteractive:!1}),(0,v.jsx)(k.a,{nodeStrokeWidth:3,zoomable:!0,pannable:!0}),(0,v.jsx)(C.s_,{position:"top-right",children:(0,v.jsx)(M,{params:Le})}),!t&&(0,v.jsx)(C.s_,{position:"top-left",children:(0,v.jsx)(J,{})})]})}),(0,v.jsxs)(i.kC,{flex:"0 0 60px",bg:"gray.100",gap:3,px:10,py:2,border:"0px solid lightgray",borderTopWidth:1,alignItems:"center",children:[(0,v.jsxs)(i.xu,{p:2,flex:"0 1 160px",fontSize:"14px",children:[(0,v.jsx)(i.xv,{color:"gray",mb:"2px",children:"Stat"}),(0,v.jsxs)(w.v2,{closeOnSelect:!1,isOpen:pe,onClose:je,children:[(0,v.jsx)(w.j2,{as:i.xu,onClick:ve,children:(0,v.jsxs)(i.kC,{alignItems:"center",fontSize:"sm",gap:2,children:[B[oe]||"(unknown)",(0,v.jsx)(F.g8,{})]})}),(0,v.jsx)(w.qy,{children:(0,v.jsxs)(w.__,{value:oe,onChange:function(e){le(e)},children:[(0,v.jsx)(w.ii,{value:"",fontSize:"sm",children:B[""]}),(0,v.jsx)(w.ii,{value:"execution_time",fontSize:"sm",children:B.execution_time}),(0,v.jsx)(w.ii,{value:"row_count",fontSize:"sm",children:B.row_count})]})})]})]}),!t&&(0,v.jsxs)(i.xu,{p:2,flex:"0 1 160px",fontSize:"14px",children:[(0,v.jsx)(i.xv,{color:"gray",mb:"2px",children:"Change Status"}),(0,v.jsxs)(w.v2,{closeOnSelect:!1,isOpen:ye,onClose:Se,children:[(0,v.jsx)(w.j2,{as:i.xu,onClick:Ce,children:(0,v.jsxs)(i.kC,{gap:2,alignItems:"center",fontSize:"sm",children:[N[de]||"(unknown)",(0,v.jsx)(F.g8,{})]})}),(0,v.jsxs)(w.qy,{children:[(0,v.jsxs)(w.__,{title:"Include",value:de,onChange:function(e){ue(e),K(void 0),$([]),ie([])},children:[(0,v.jsx)(w.ii,{value:"impacted",fontSize:"sm",children:"Impacted"}),(0,v.jsxs)(w.ii,{value:"impacted+",fontSize:"sm",children:["Impacted+"," ",(0,v.jsx)(Z.u,{label:"Impacted and 1st degree parents",children:(0,v.jsx)(F.sz,{})})]}),(0,v.jsx)(w.ii,{value:"all",fontSize:"sm",children:"All nodes"})]}),(0,v.jsxs)(w.__,{title:"Select",value:me,onChange:function(e){fe(e)},children:[(0,v.jsx)(w.ii,{fontSize:"sm",value:"changed",children:"Changed"}),(0,v.jsx)(w.ii,{fontSize:"sm",value:"impacted",children:"Impacted"}),(0,v.jsx)(w.ii,{fontSize:"sm",value:"all",children:"All nodes"})]})]})]})]}),(0,v.jsx)(i.LZ,{}),(0,v.jsx)(c.zx,{_hover:{bg:"gray.200"},onClick:function(){K(void 0),ue("impacted+"),fe("impacted"),$([]),ie([])},children:"Reset"})]}),(0,v.jsx)(_.h_,{children:(0,v.jsxs)(w.v2,{isOpen:Oe&&void 0!==Ee,onClose:Ze,size:"sm",children:[(0,v.jsx)(w.j2,{"aria-hidden":!0,w:1,h:1,style:{position:"absolute",left:ze[0],top:ze[1],cursor:"default"}}),(0,v.jsxs)(w.qy,{zIndex:"modal",fontSize:"12px",children:[Ee&&(null===(n=l[Ee])||void 0===n?void 0:n.path)&&(0,v.jsx)(w.sN,{onClick:function(){var e;W((null===(e=l[Ee])||void 0===e?void 0:e.path)||"")},children:"Go to page"}),Ee&&(0,v.jsx)(w.sN,{onClick:function(){K(Ee),$([]),ie([])},children:"Focus on node"}),Ee&&(0,v.jsx)(w.sN,{onClick:function(){$([].concat((0,b.Z)(X),[Ee||""]))},children:"Expand Left"}),Ee&&(0,v.jsx)(w.sN,{onClick:function(){ie([].concat((0,b.Z)(te),[Ee||""]))},children:"Expand Right"})]})]})})]})}function J(){return(0,v.jsxs)(i.xu,{bg:"white",padding:"12px",borderWidth:"1px",borderColor:"gray.200",fontSize:"sm",children:[(0,v.jsxs)(i.kC,{alignItems:"center",gap:"6px",marginBottom:"2px",children:[(0,v.jsx)(s.JO,{color:"#1dce00",as:p.Wj})," added"]}),(0,v.jsxs)(i.kC,{alignItems:"center",gap:"6px",marginBottom:"2px",children:[(0,v.jsx)(s.JO,{color:"#ff067e",as:p.lu})," removed"]}),(0,v.jsxs)(i.kC,{alignItems:"center",gap:"6px",marginBottom:"2px",children:[(0,v.jsx)(s.JO,{color:"#ffa502",as:p.ho})," modified"]}),(0,v.jsxs)(i.kC,{alignItems:"center",gap:"6px",children:[(0,v.jsx)(s.JO,{color:"#fd6136",as:p.UC})," implicit"]})]})}function P(e){var n=e.singleOnly;return(0,v.jsx)(C.tV,{children:(0,v.jsx)(R,{singleOnly:n})})}var W=t(69100);function q(e){var n=e.singleOnly,t=u.n.getState(),r=t.isLegacy,h=t.projectTree,g=t.databaseTree,p=t.expandTreeForPath,b=(0,m.TH)(),y=(0,o.Z)(b,2),C=y[0],S=y[1],k=(0,x.useState)(-1),O=(0,o.Z)(k,2),w=O[0],Z=O[1],_=(0,a.B)(),T=(0,I.KZ)();return(0,x.useEffect)((function(){"/ssr"!==C&&w<0&&(p(C),Z(0))}),[C,w,p]),r?(0,v.jsx)(i.xu,{mt:5,children:(0,v.jsx)(j,{items:h,singleOnly:n})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(l.mQ,{index:w,onChange:function(e){p(C),Z(e)},children:[(0,v.jsxs)(i.kC,{children:[(0,v.jsxs)(l.td,{flex:"1 1 auto",flexWrap:"wrap",children:[(0,v.jsxs)(l.OK,{children:[(0,v.jsx)(s.JO,{as:f.$nz,mr:2}),"Project"]}),(0,v.jsxs)(l.OK,{children:[(0,v.jsx)(s.JO,{as:f.i1q,mr:2}),"Database"]})]}),_&&(0,v.jsx)(i.xu,{borderBottom:"2px",borderColor:"gray.200",children:(0,v.jsx)(c.hU,{"aria-label":"Show Lineage Graph",icon:(0,v.jsx)(W.UCm,{}),isRound:!1,backgroundColor:"transparent",onClick:function(){return S(C+"?g_v=1")}})})]}),(0,v.jsxs)(l.nP,{children:[(0,v.jsx)(l.x4,{children:(0,v.jsx)(j,{items:h,singleOnly:n})}),(0,v.jsx)(l.x4,{children:(0,v.jsx)(j,{items:g,singleOnly:n})})]})]}),(0,v.jsxs)(d.u_,{isOpen:_&&"1"===T.get("g_v"),onClose:function(){return S(C)},size:"xl",children:[(0,v.jsx)(d.ZA,{}),(0,v.jsxs)(d.hz,{maxW:"calc(100vw - 200px)",backgroundColor:"#f6f6f6",children:[(0,v.jsxs)(d.xB,{borderBottom:2,backgroundColor:"gray.100",border:"0 solid lightgray",borderBottomWidth:1,children:[(0,v.jsx)(i.xv,{fontSize:"sm",children:"Lineage Graph"}),(0,v.jsx)(d.ol,{})]}),(0,v.jsx)(d.fe,{p:0,children:(0,v.jsx)(P,{singleOnly:n})})]})]})]})}function U(e){var n=e.children,t=e.sideNavTop,o=void 0===t?"0px":t,l=e.cloud,s=e.singleOnly;return(0,v.jsx)(a.Q,{cloud:!0===l,children:(0,v.jsxs)(i.rj,{width:"100%",h:"100%",templateColumns:"minmax(200px, 400px) 1px minmax(420px, 100%)",children:[(0,v.jsx)(i.P4,{overflowY:"auto",position:"sticky",top:o,maxHeight:"calc(100vh - ".concat(o,")"),children:(0,v.jsx)(q,{singleOnly:s})}),(0,v.jsx)(i.iz,{orientation:"vertical"}),(0,v.jsx)(i.P4,{maxHeight:r.t4,width:"100%",h:"100%",p:9,children:n})]})})}},51100:function(e,n,t){t.d(n,{T:function(){return l}});var i=t(3964),r=t(75616),a=t(25599),o=t(78391);function l(){return(0,o.jsxs)(i.kC,{direction:"column",width:"100%",minH:"100vh",justifyContent:"center",alignItems:"center",children:[(0,o.jsx)(i.X6,{fontSize:"3xl",children:"404, Not Found!"}),(0,o.jsx)(r.zx,{mt:4,children:(0,o.jsx)(a.rU,{href:"/",children:"Back to Home"})})]})}},90197:function(e,n,t){t.d(n,{OA:function(){return f},U8:function(){return p},_e:function(){return h},cr:function(){return u},jh:function(){return c},pT:function(){return x},ud:function(){return m}});var i=t(82175),r=t(61431),a=t(29367),o=t.n(a),l=(t(29936),t(24621)),s=300,c=function(e,n,t,a){var o=[],l=[];return Object.entries(e).forEach((function(e){var l=(0,r.Z)(e,2),s=l[0],c=l[1];if(n.has(s)){var d=t.has(s);if("test"!==c.type){var u={id:s,position:{x:0,y:0},data:(0,i.Z)((0,i.Z)((0,i.Z)({},c),a.nodeOverrides),{},{isSelected:d}),draggable:!0,type:"customNode"};o.push(u)}}})),o.forEach((function(e){var t=e.data;Object.entries(t.dependsOn).forEach((function(e){var o=(0,r.Z)(e,2),s=o[0],c=o[1];n.has(s)&&l.push({source:s,target:t.uniqueId,id:"".concat(t.uniqueId," -> ").concat(s),type:"customEdge",data:(0,i.Z)((0,i.Z)({},c),a.edgeOverrides)})}))})),d(o,l,"LR"),{nodes:o,edges:l}},d=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"LR",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r="LR"===t,a=new(o().graphlib.Graph);a.setDefaultEdgeLabel((function(){return{}})),a.setGraph({rankdir:t}),e.forEach((function(e){a.setNode(e.id,{width:s,height:60})})),n.forEach((function(e){a.setEdge(e.source,e.target)})),o().layout(a),e.forEach((function(e){var n=a.node(e.id);return e.targetPosition=r?"left":"top",e.sourcePosition=r?"right":"bottom",e.position={x:n.x-150+i,y:n.y-30+i},e}))};function u(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(0,l.Es)(n,(function(n){return Object.keys(e[n].dependsOn)}),t)}function h(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(0,l.Bj)(n,(function(n){return Object.keys(e[n].children)}),t)}function x(e){var n=new Set;return Object.entries(e).forEach((function(e){var t=(0,r.Z)(e,2),i=t[0],a=t[1];"added"!==a.changeStatus&&"removed"!==a.changeStatus&&"modified"!==a.changeStatus&&"implicit"!==a.changeStatus||n.add(i)})),n}function m(e){var n=new Set;return Object.entries(e).forEach((function(e){var t=(0,r.Z)(e,2),i=t[0],a=t[1];"added"!==a.changeStatus&&"removed"!==a.changeStatus&&"modified"!==a.changeStatus||n.add(i)})),n}function f(){for(var e=new Set,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return t.forEach((function(n){n.forEach((function(n){e.add(n)}))})),e}function g(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"decimal";if(void 0!==e){if("decimal"===n)return new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:2}).format(e);if("percent"===n)return new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}).format(e);if("duration"===n){var t=e<0?"-":"",i=Math.abs(e),r=Math.floor(i%60),a=Math.floor(i/60%60),o=Math.floor(i/3600),l=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),s=new Intl.NumberFormat("en-US",{minimumIntegerDigits:2});return i<10?"".concat(t).concat(l.format(i),'"'):i<60?"".concat(t).concat(r,'"'):i<3600?"".concat(t).concat(a,"'").concat(s.format(r),'"'):"".concat(t).concat(o,"h").concat(s.format(a),"'").concat(s.format(r),'"')}}}function p(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"decimal",r=void 0!==n&&n.hasOwnProperty(t)?n[t]:void 0,a=void 0!==e&&e.hasOwnProperty(t)?e[t]:void 0,o=null!==r&&void 0!==r?r:a;if(void 0===o)return{statValueF:"-"};var l=g(o,i);if(void 0===a||void 0===r)return{statValue:o,statValueF:l};var s=r-a;"duration"===i&&Math.abs(s)<.01&&(s=0);var c=g(s,i);return{statValue:o,statValueF:l,statDiff:s,statDiffF:c}}},29671:function(e,n,t){t.d(n,{g:function(){return M}});var i=t(61431),r=t(11060),a=t(82175),o=t(3964),l=t(75616),s=t(98536),c=t(37979),d=t(8429),u=t(45035),h=t(60767),x=t(17954),m=t(69100),f=t(24621),g=t(25126),p=t(53503),v=t(50334),j=t(80009),b=t(5665),y=t(25599),C=t(45809),S=t(78391);function k(e){var n=e.value,t=e.changeStatus,i=(0,C.Mr)(t),r=i.icon,a=i.color;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.JO,{as:r,color:a})," ",(0,S.jsx)(o.xv,{ml:1,children:n})]})}function O(e){var n=e.added,t=e.removed,i=e.modified,r=e.implicit,a=[],l=!0;return n&&(a.push(l?(0,S.jsx)(S.Fragment,{children:"("}):(0,S.jsx)(o.xu,{pr:2,children:","})),a.push((0,S.jsx)(k,{value:n,changeStatus:"added"})),l=!1),t&&(a.push(l?(0,S.jsx)(S.Fragment,{children:"("}):(0,S.jsx)(o.xu,{pr:2,children:","})),a.push((0,S.jsx)(k,{value:t,changeStatus:"removed"})),l=!1),i&&(a.push(l?(0,S.jsx)(S.Fragment,{children:"("}):(0,S.jsx)(o.xu,{pr:2,children:","})),a.push((0,S.jsx)(k,{value:i,changeStatus:"modified"})),l=!1),r&&(a.push(l?(0,S.jsx)(S.Fragment,{children:"("}):(0,S.jsx)(o.xu,{pr:2,children:","})),a.push((0,S.jsx)(k,{value:r,changeStatus:"implicit"})),l=!1),l||a.push((0,S.jsx)(S.Fragment,{children:")"})),(0,S.jsx)(o.xu,{display:"inline-block",children:(0,S.jsx)(o.kC,{alignItems:"center",justifyContent:"center",children:a})})}var w=t(64959);function Z(e){var n=e.tableColumnsOnly,t=e.sortMethod,r=e.handleSortChange,a=e.singleOnly;return(0,S.jsx)(v.xJ,{children:(0,S.jsxs)(v.iA,{variant:"simple",children:[(0,S.jsx)(v.hr,{children:(0,S.jsxs)(v.Tr,{children:[!a&&(0,S.jsx)(v.Th,{p:0,width:"30px"}),(0,S.jsxs)(v.Th,{pl:0,children:["Name"," ",(0,S.jsx)(j.u,{label:"sort by ".concat(t," order"),children:(0,S.jsx)(l.hU,{"aria-label":"Sort",icon:"alphabet"===t?(0,S.jsx)(b.Llq,{}):(0,S.jsx)(b.yzb,{}),onClick:r,size:"sm",ml:"1"})})]}),(0,S.jsx)(v.Th,{children:"Columns"}),(0,S.jsx)(v.Th,{isNumeric:!0,children:"Rows"}),(0,S.jsx)(v.Th,{isNumeric:!0,children:"Execution Time"})]})}),(0,S.jsx)(v.p3,{fontSize:"sm",children:n.map((function(e,n){var t=(0,i.Z)(e,3),r=t[1],l=r.base,s=r.target,c=t[2],d=null!==s&&void 0!==s?s:l;if(!d)return(0,S.jsx)(S.Fragment,{});var h=(0,C.Mr)(c.changeStatus),x=h.icon,m=h.color;return(0,S.jsxs)(v.Tr,{children:[!a&&(0,S.jsx)(v.Td,{p:0,children:(0,S.jsx)(o.kC,{alignContent:"center",children:x&&(0,S.jsx)(u.JO,{color:m,as:x})})}),(0,S.jsx)(v.Td,{pl:0,children:(0,S.jsx)(y.rU,{href:"/".concat(d.resource_type,"s/").concat(d.unique_id),children:d.name})}),(0,S.jsxs)(v.Td,{children:["".concat(Object.keys((null===d||void 0===d?void 0:d.__columns)||{}).length),!a&&"added"!==c.changeStatus&&"removed"!==c.changeStatus&&(0,S.jsx)(O,{added:c.added,removed:c.deleted,modified:c.changed})]}),(0,S.jsx)(v.Td,{textAlign:"right",fontSize:"sm",children:(0,S.jsx)(w.h,{base:l,target:s,stat:"row_count"})}),(0,S.jsx)(v.Td,{textAlign:"right",fontSize:"sm",children:(0,S.jsx)(w.h,{base:l,target:s,stat:"execution_time",negativeChange:!0})})]})}))})]})})}var _=t(64138);function T(e){var n=e.name,t=e.value,i=e.tip;return(0,S.jsxs)(o.gC,{alignItems:"flex-start",children:[(0,S.jsxs)(o.xv,{fontSize:"sm",color:"gray",children:[n,i&&(0,S.jsx)(j.u,{label:i,children:(0,S.jsx)(o.xu,{display:"inline-block",children:(0,S.jsx)(u.JO,{mx:"2px",as:_.H33,boxSize:3})})})]}),(0,S.jsx)(o.xv,{fontSize:"l",children:t})]})}function z(e){var n=e.tableColumnsOnly,t=(e.noImpacted,n.reduce((function(e,n){var t=(0,i.Z)(n,3),r=(t[0],t[1]),a=(r.base,r.target),o=t[2],l=o.changeStatus,s=o.impacted;return{total:e.total+(a?1:0),added:e.added+("added"===l?1:0),removed:e.removed+("removed"===l?1:0),modified:e.modified+("modified"===l?1:0),impacted:e.impacted+(s?1:0),implicit:e.implicit+("implicit"===l?1:0)}}),{total:0,added:0,removed:0,modified:0,impacted:0,implicit:0})),r=t.total,a=t.added,l=t.removed,s=t.modified,c=t.impacted,d=t.implicit;return(0,S.jsxs)(o.rj,{templateColumns:"repeat(4, 1fr)",gap:6,children:[(0,S.jsx)(T,{name:"Total",value:r}),(0,S.jsx)(T,{name:"Impacted",value:c,tip:"Explicit changes and their downstream"}),(0,S.jsx)(T,{name:"Explicit Changes",value:(0,S.jsxs)(S.Fragment,{children:[a+l+s," ",(0,S.jsx)(O,{added:a,removed:l,modified:s})," "]}),tip:"Code change or config change"}),(0,S.jsx)(T,{name:"Implicit Changes",value:d,tip:"Any detected changes which are not explicit changed"})]})}function F(e){var n=e.tableColumnsOnly,t=e.sortMethod,r=e.handleSortChange,a=e.singleOnly;return(0,S.jsx)(v.xJ,{children:(0,S.jsxs)(v.iA,{variant:"simple",children:[(0,S.jsx)(v.hr,{children:(0,S.jsxs)(v.Tr,{children:[!a&&(0,S.jsx)(v.Th,{p:0,width:"30px"}),(0,S.jsxs)(v.Th,{pl:0,children:["Name"," ",(0,S.jsx)(j.u,{label:"sort by ".concat(t," order"),children:(0,S.jsx)(l.hU,{"aria-label":"Sort",icon:"alphabet"===t?(0,S.jsx)(b.Llq,{}):(0,S.jsx)(b.yzb,{}),onClick:r,size:"sm",ml:"1"})})]}),(0,S.jsx)(v.Th,{children:"Queries"})]})}),(0,S.jsx)(v.p3,{fontSize:"sm",children:n.map((function(e,n){var t=(0,i.Z)(e,3),r=t[1],l=r.base,s=r.target,c=t[2],d=null!==l&&void 0!==l?l:s;if(!d)return(0,S.jsx)(S.Fragment,{});var h=(0,C.Mr)(c.changeStatus),x=h.icon,m=h.color;return(0,S.jsxs)(v.Tr,{children:[!a&&(0,S.jsx)(v.Td,{p:0,children:(0,S.jsx)(o.kC,{alignContent:"center",children:x&&(0,S.jsx)(u.JO,{color:m,as:x})})}),(0,S.jsx)(v.Td,{pl:0,children:(0,S.jsx)(y.rU,{href:"/metrics/".concat(d.unique_id),children:d.name})}),(0,S.jsxs)(v.Td,{children:["".concat(Object.keys((null===d||void 0===d?void 0:d.__queries)||{}).length),(0,S.jsx)(O,{added:c.added,removed:c.deleted,modified:c.changed})]})]})}))})]})})}var A=t(24892);function D(e,n){var t=(0,C.Mr)(n),i=t.icon,r=t.color;return(0,S.jsx)(d.ii,{value:n||"noChange",children:(0,S.jsxs)(o.kC,{alignItems:"center",gap:1,children:[i&&(0,S.jsx)(u.JO,{as:i,color:r}),(0,S.jsx)(o.xu,{children:e})]})})}function E(e){var n=e.filterOptions,t=e.setFilterOptions,i=n.changeStatus,s=[];return i.has("added")&&i.has("removed")&&i.has("modified")&&i.has("implicit")&&(s=i.has("noChange")?["all"]:["changed"]),(0,S.jsxs)(d.v2,{closeOnSelect:!1,autoSelect:!1,children:[(0,S.jsx)(d.j2,{as:l.zx,fontSize:"14px",children:(0,S.jsxs)(o.kC,{alignItems:"center",children:["Filter ",(0,S.jsx)(u.JO,{as:x.r0X,fontSize:"16px",ml:"5px"})]})}),(0,S.jsxs)(d.qy,{minWidth:"240px",children:[(0,S.jsxs)(d.__,{type:"checkbox",value:s,children:[(0,S.jsx)(d.ii,{value:"changed",onClick:function(){t((0,a.Z)((0,a.Z)({},n),{},{changeStatus:new Set(["added","removed","modified","implicit"])}))},children:"Change only"}),(0,S.jsx)(d.ii,{value:"all",onClick:function(){t((0,a.Z)((0,a.Z)({},n),{},{changeStatus:new Set(["added","removed","modified","implicit","noChange"])}))},children:"All nodes"})]}),(0,S.jsx)(d.R,{}),(0,S.jsxs)(d.__,{type:"checkbox",value:(0,r.Z)(Array.from(i)),onChange:function(e){t((0,a.Z)((0,a.Z)({},n),{},{changeStatus:new Set(e)}))},children:[D("Added","added"),D("Removed","removed"),D("Modified","modified"),D("Implicit","implicit"),D("No change")]})]})]})}var I={changeStatus:new Set(["added","removed","modified","implicit"])};function M(e){var n=e.singleOnly,t=g.n.getState(),d=t.tableColumnsOnly,x=void 0===d?[]:d,v=t.lineageGraph,j=(0,h.useState)("topology"),b=(0,i.Z)(j,2),k=b[0],O=b[1],w=(0,h.useState)(0),_=(0,i.Z)(w,2),T=_[0],D=_[1],M=(0,h.useState)(I),H=(0,i.Z)(M,2),L=H[0],B=H[1],N=(0,y.TH)(),R=(0,i.Z)(N,2),J=R[0],P=R[1],W=(0,A.B)(),q=function(){O("alphabet"===k?"topology":"alphabet")},U=function(e){var n={};e.forEach((function(e){var t,r=(0,i.Z)(e,3),a=(r[0],r[1]),o=a.base,l=a.target,s=r[2],c=null!==l&&void 0!==l?l:o,d=null!==(t=null===c||void 0===c?void 0:c.resource_type)&&void 0!==t?t:"";n[d]||(n[d]={total:0,changed:0}),n[d].total+=1,s.changeStatus&&(n[d].changed+=1)}));var t=[];return n.model&&t.push((0,a.Z)({resourceType:"model",name:"Models",icon:(0,C.yk)("model").icon},n.model)),n.seed&&t.push((0,a.Z)({resourceType:"seed",name:"Seeds",icon:(0,C.yk)("seed").icon},n.seed)),n.source&&t.push((0,a.Z)({resourceType:"source",name:"Sources",icon:(0,C.yk)("source").icon},n.source)),n.metric&&t.push((0,a.Z)({resourceType:"metric",name:"Metrics",icon:(0,C.yk)("metric").icon},n.metric)),t}(x),V=U[T].resourceType,G=(0,h.useMemo)((function(){var e=x.filter((function(e){var n=(0,i.Z)(e,2),t=(n[0],n[1]),r=t.base,a=t.target,o=null!==a&&void 0!==a?a:r;return(null===o||void 0===o?void 0:o.resource_type)===V}));return"topology"===k&&v?function(e,n){var t=(0,f.zX)(Object.keys(n),(function(e){var t=n[e].children;return Object.keys(t)})),i={};e.forEach((function(e){i[e[0]]=e}));var r=[];return t.forEach((function(e){i[e]&&r.push(i[e])})),r}(e,v):function(e){function n(e){var n,t=(0,i.Z)(e,2),r=(t[0],t[1]),a=r.base,o=r.target,l=null!==o&&void 0!==o?o:a;return null!==(n=null===l||void 0===l?void 0:l.name)&&void 0!==n?n:""}var t=(0,r.Z)(e);return t.sort((function(e,t){var i=n(e).toLowerCase(),r=n(t).toLowerCase();return i.localeCompare(r)})),t}(e)}),[V,k,x,v]),K=G.filter((function(e){var t,r=(0,i.Z)(e,3),a=r[1],o=a.base,l=a.target,s=r[2],c=null!==o&&void 0!==o?o:l;if(!c)return!1;if(L.search&&!(null!==(t=null===c||void 0===c?void 0:c.name)&&void 0!==t?t:"").includes(L.search))return!1;if(!n){if(!L.changeStatus.has("noChange")&&null===s.changeStatus)return!1;if(!L.changeStatus.has("added")&&"added"===s.changeStatus)return!1;if(!L.changeStatus.has("removed")&&"removed"===s.changeStatus)return!1;if(!L.changeStatus.has("modified")&&"modified"===s.changeStatus)return!1;if(!L.changeStatus.has("implicit")&&"implicit"===s.changeStatus)return!1}return!0}));return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(o.kC,{direction:"column",w:"100%",minHeight:"650px",children:[(0,S.jsxs)(o.kC,{w:"100%",children:[(0,S.jsx)(o.X6,{fontSize:24,children:"Overview"}),(0,S.jsx)(o.LZ,{}),W&&(0,S.jsxs)(l.zx,{size:"sm",bg:"piperider.500",color:"white",_hover:{bg:"piperider.600"},_active:{bg:"piperider.800"},onClick:function(){P("".concat(J,"?g_v=1"))},children:[n?"Lineage Graph":"Lineage Diff",(0,S.jsx)(u.JO,{as:m.UCm,ml:1})]})]}),(0,S.jsx)(s.mQ,{onChange:D,mb:4,children:(0,S.jsx)(s.td,{children:U.map((function(e){return(0,S.jsxs)(s.OK,{children:[(0,S.jsx)(u.JO,{as:e.icon,mr:1}),e.name,!n&&e.changed>0&&(0,S.jsx)(c.Vp,{size:"sm",bg:"red.400",color:"white",ml:2,children:e.changed})]})}))})}),!n&&(0,S.jsx)(z,{tableColumnsOnly:G,noImpacted:"source"===V||"seed"===V}),(0,S.jsxs)(o.kC,{alignContent:"stretch",gap:3,my:2,children:[(0,S.jsx)(p.f,{onChange:function(e){B((0,a.Z)((0,a.Z)({},L),{},{search:e}))},placeholder:"Search ".concat(V,"s")}),!n&&(0,S.jsx)(E,{filterOptions:L,setFilterOptions:B})]}),"metric"===V&&(0,S.jsx)(F,{tableColumnsOnly:K,sortMethod:k,handleSortChange:q,singleOnly:n}),("model"===V||"seed"===V||"source"===V)&&(0,S.jsx)(Z,{tableColumnsOnly:K,sortMethod:k,handleSortChange:q,singleOnly:n})]})})}},59115:function(e,n,t){t.d(n,{O:function(){return C}});var i=t(82175),r=t(61431),a=t(37932),o=t(75607),l=t(89755),s=t(3964),c=t(50334),d=t(60444),u=t(80009),h=t(72681),x=t(79991),m=t(60767),f=t(23397),g=t(38771),p=t(22944),v=t(56393),j=t(78391),b=["comparableAssertions","filterByTableOnly","filterString","setFilterString","caseSensitiveFilter","singleOnly","tableSize"],y=["status"];function C(e){var n=e.comparableAssertions,t=e.filterByTableOnly,C=e.filterString,S=void 0===C?"":C,k=(e.setFilterString,e.caseSensitiveFilter),O=e.singleOnly,w=e.tableSize,Z=(0,a.Z)(e,b),_=(0,l.qY)(),T=(0,h.Cl)(),z=(0,m.useState)([]),F=(0,r.Z)(z,2),A=F[0],D=F[1],E=(0,m.useState)([]),I=(0,r.Z)(E,2),M=I[0],H=I[1],L=(0,m.useState)(),B=(0,r.Z)(L,2),N=B[0],R=B[1];(0,m.useEffect)((function(){var e,t=(null===n||void 0===n||null===(e=n.target)||void 0===e?void 0:e.map((function(e,t){var r,o,l=(null===n||void 0===n||null===(r=n.base)||void 0===r?void 0:r[t])||{},s=(l.status,(0,a.Z)(l,y)),c=null===n||void 0===n||null===(o=n.base)||void 0===o?void 0:o[t];return(0,i.Z)((0,i.Z)({},e||s||{}),{},{status:O?null===c||void 0===c?void 0:c.status:null===e||void 0===e?void 0:e.status,baseStatus:null===c||void 0===c?void 0:c.status,baseRef:c,targetStatus:null===e||void 0===e?void 0:e.status,targetRef:e})})).sort((function(e){return"failed"===e.status?-1:1})))||[];D(t)}),[]);var J=O?[T.accessor("status",{cell:function(e){return e.getValue()},header:"Status",enableGlobalFilter:!1})]:[T.accessor("baseStatus",{cell:function(e){return e.getValue()},header:"Base Status",enableGlobalFilter:!1}),T.accessor("targetStatus",{cell:function(e){return e.getValue()},header:"Target Status",enableGlobalFilter:!1})],P=O?[T.accessor("expected",{cell:function(e){return e.getValue()},header:"Expected"}),T.accessor("actual",{cell:function(e){return"dbt"===e.row.original.source?e.row.original.message:e.getValue()},header:"Actual"})]:[],W=(0,m.useMemo)((function(){return[].concat(J,[{accessorFn:function(e){var n,t;return"".concat(null!==(n=e.table)&&void 0!==n?n:"",".").concat(null!==(t=e.column)&&void 0!==t?t:"")},id:"testSubject",header:"Test Subject"},T.accessor("name",{cell:function(e){var n,t;return null!==(n=null!==(t=e.row.original.display_name)&&void 0!==t?t:e.getValue())&&void 0!==n?n:e.row.original.id},header:"Assertion"})],P,[T.accessor("source",{cell:function(e){return e.getValue()},header:"Source",enableGlobalFilter:!1})])}),[]),q=(0,x.b7)({columns:W,data:A,getCoreRowModel:(0,h.sC)(),getSortedRowModel:(0,h.tj)(),onSortingChange:H,state:{sorting:M}});return 0===A.length?(0,j.jsx)(s.kC,{direction:"column",justifyContent:"center",alignItems:"center",children:(0,j.jsx)(v.J,{text:"No Tests Available"})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.xJ,(0,i.Z)((0,i.Z)({},Z),{},{children:(0,j.jsxs)(c.iA,{variant:"simple",size:w,children:[(0,j.jsx)(c.hr,{children:(0,j.jsxs)(c.Tr,{children:[q.getFlatHeaders().map((function(e){var n=(0,j.jsx)(d.m$.span,{pl:"4",pos:"absolute",right:0,children:e.column.getIsSorted()?"desc"===e.column.getIsSorted()?(0,j.jsx)(o.AS,{"aria-label":"sorted descending"}):(0,j.jsx)(o.$l,{"aria-label":"sorted ascending"}):null}),t=Boolean(e.id.match(/status/gi));return(0,j.jsxs)(c.Th,{pos:"relative",onClick:e.column.getToggleSortingHandler(),_hover:{cursor:"pointer"},textAlign:t?"center":"left",px:t?0:2,children:[(0,x.ie)(e.column.columnDef.header,e.getContext()),n]},e.id)})),!O&&(0,j.jsx)(c.Th,{textAlign:"center",children:"View"})]})}),(0,j.jsx)(c.p3,{children:q.getSortedRowModel().rows.filter((function(e){var n=e.original,i=new RegExp(S,"g".concat(k?"":"i"));return t?(n.table||"")===S:!S||(((null===n||void 0===n?void 0:n.name)||"").search(i)>-1||(n.table||"").search(i)>-1||(n.column||"").search(i)>-1)})).map((function(e){var n,t=e.original,i=t.id,r=t.table,a=t.column,o=t.name,l=t.expected,d=t.actual,h=t.source,x=t.targetStatus,m=t.baseStatus,p=t.baseRef,v=t.targetRef,b=t.message,y=t.display_name,C="".concat(null!==r&&void 0!==r?r:"").concat(a?"."+a:""),S=(0,f.sG)(l),k=(0,f.sG)("piperider"===h?d:b),w=null!==(n=null!==y&&void 0!==y?y:o)&&void 0!==n?n:i;return(0,j.jsxs)(c.Tr,{children:[(0,j.jsx)(c.Td,{children:(0,j.jsx)(s.kC,{justifyContent:"center",children:(0,j.jsx)(g.Op,{status:m})})}),!O&&(0,j.jsx)(c.Td,{children:(0,j.jsx)(s.kC,{justifyContent:"center",children:(0,j.jsx)(g.Op,{status:x})})}),(0,j.jsx)(c.Td,{maxWidth:"16em",px:2,children:(0,j.jsx)(u.u,{label:C,children:(0,j.jsx)(s.xv,{fontSize:"sm",noOfLines:1,textOverflow:"ellipsis",children:C})})}),(0,j.jsx)(c.Td,{maxWidth:"16em",px:2,children:(0,j.jsx)(u.u,{label:w,children:(0,j.jsx)(s.xv,{noOfLines:1,textOverflow:"ellipsis",children:w})})}),O&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(c.Td,{px:2,children:(0,j.jsx)(u.u,{label:S,children:(0,j.jsx)(s.EK,{maxWidth:"14em",noOfLines:1,color:"gray.700",children:S})})}),(0,j.jsx)(c.Td,{px:2,children:(0,j.jsx)(u.u,{label:k,children:(0,j.jsx)(s.EK,{maxWidth:"14em",noOfLines:1,color:(O?"failed"===m:"failed"===x)?"red.500":"gray.700",children:k})})})]}),(0,j.jsx)(c.Td,{px:2,children:h}),!O&&(0,j.jsx)(c.Td,{textAlign:"center",onClick:function(){R({assertionSource:h||(null===p||void 0===p?void 0:p.source),assertionName:o||(null===p||void 0===p?void 0:p.name),base:p,target:v}),_.onOpen()},children:(0,j.jsx)(s.xv,{as:"span",cursor:"pointer",children:"\ud83d\udd0d"})})]},e.id)}))})]})})),(0,j.jsx)(p.E,(0,i.Z)((0,i.Z)({},_),{},{data:N,onClose:function(){_.onClose(),R(void 0)}}))]})}},61698:function(e,n,t){t.d(n,{l:function(){return j}});var i=t(61431),r=t(75607),a=t(3964),o=t(37979),l=t(80009),s=t(45035),c=t(40859),d=t(60767),u=t(83472),h=t(11060),x=t(51062),m=t(4726),f=(t(75229),t(78508)),g=t(78391);function p(e){var n,t=e.data,r=void 0===t?[]:t,a=e.isHorizontal,o=e.stacked,l=e.hasDimensions;x.kL.register(x.ZL,x.f$,x.uw,x.u);var s=[],c=Array.from(u.Uh.values()),d=!l&&2===r.length;r.forEach((function(e,t){var r,a=(null!==e&&void 0!==e?e:{}).data,o=void 0===a?[]:a,l=f.zip.apply(void 0,(0,h.Z)(o)),u=(0,i.Z)(l,2),x=u[0],m=u[1];n=null!==(r=n)&&void 0!==r?r:x;var g=(void 0===m?[]:m).map((function(e){return Number(null!==e&&void 0!==e?e:void 0)})),p=d?0===t?"Base":"Target":null===e||void 0===e?void 0:e.label;s.push({label:p,data:g,borderColor:c[t],backgroundColor:c[t]+"50"})}));var p={responsive:!0,maintainAspectRatio:!1,indexAxis:a?"y":"x",plugins:{tooltip:{mode:"index",position:"nearest",intersect:!1,callbacks:{title:function(e){var n=(0,i.Z)(e,1)[0].label,t=n.lastIndexOf(",");return n.slice(0,t)},labelColor:function(e){var n=e.datasetIndex;return{borderColor:u.wC,backgroundColor:c[n]}}}},legend:{position:"bottom",labels:{padding:10,boxWidth:30,generateLabels:function(e){return e.data.datasets.map((function(e,n){return{fillStyle:c[n],text:"".concat(e.label)}}))}}}},scales:{x:{stacked:o},y:{stacked:o}}},v={datasets:s,labels:n};return(0,g.jsx)(m.$Q,{plugins:[x.De],data:v,options:p})}function v(e){var n=e.data,t=void 0===n?[]:n,r=e.timeGrain,a=e.fill,o=e.stacked,l=e.hasDimensions;x.kL.register(x.jn,x.od,x.RM,x.f$,x.uw,x.Gu,x.u);var s=[],c=Array.from(u.Uh.values()),d=!l&&2===t.length;t.forEach((function(e,n){var t=(null!==e&&void 0!==e?e:{}).data,r=void 0===t?[]:t,o=f.zip.apply(void 0,(0,h.Z)(r)),l=(0,i.Z)(o,2),x=l[0],m=l[1],g=(void 0===m?[]:m).map((function(e,n){return{x:x[n],y:Number(null!==e&&void 0!==e?e:void 0)}})),p=d?0===n?"Base":"Target":null===e||void 0===e?void 0:e.label;s.push({label:p,data:g,borderColor:c[n],pointBackgroundColor:c[n],spanGaps:!0,fill:a,backgroundColor:c[n]+"50",segment:{borderColor:function(e){return(0,u.im)(e,"rgb(0,0,0,0.2)")},borderDash:function(e){return(0,u.im)(e,[6,6])},backgroundColor:function(e){return(0,u.im)(e,"rgb(0,0,0,0.1)")}}})}));var p={responsive:!0,maintainAspectRatio:!1,plugins:{filler:{},tooltip:{mode:"index",position:"nearest",intersect:!1,callbacks:{title:function(e){var n=(0,i.Z)(e,1)[0].label,t=n.lastIndexOf(",");return n.slice(0,t)},labelColor:function(e){var n=e.datasetIndex;return{borderColor:u.wC,backgroundColor:c[n]}}}},legend:{position:"bottom",labels:{padding:10,boxWidth:30,generateLabels:function(e){return e.data.datasets.map((function(e,n){return{fillStyle:c[n],text:"".concat(e.label)}}))}}}},scales:{x:{type:"time",time:{unit:r}},y:{stacked:o}}},v={datasets:s};return(0,g.jsx)(m.x1,{plugins:[x.De],data:v,options:p})}function j(e){var n=e.data,t=n.base,u=n.target,h=e.singleOnly,x=(0,d.useState)("line"),m=(0,i.Z)(x,2),f=m[0],p=m[1],v=u||t,j=null===v||void 0===v?void 0:v.grain,y="-",C="-";if(v&&v.data.length>0){var S=null===v||void 0===v?void 0:v.data[0],k=null===v||void 0===v?void 0:v.data[v.data.length-1];y=String(S[0]),C=String(k[0])}return(0,g.jsxs)(a.xu,{p:3,children:[(0,g.jsxs)(a.xu,{pb:3,children:[(0,g.jsxs)(a.kC,{className:"widget-header",alignItems:"center",gap:2,mb:2,justifyContent:"space-between",children:[(0,g.jsxs)(a.kC,{alignItems:"center",gap:2,children:[(0,g.jsx)(o.Vp,{colorScheme:"blue",variant:"subtle",fontWeight:"medium",children:null===v||void 0===v?void 0:v.label}),(0,g.jsx)(l.u,{shouldWrapChildren:!0,label:null===v||void 0===v?void 0:v.description,placement:"right",children:(0,g.jsx)(s.JO,{as:r.sz})})]}),(0,g.jsx)(c.Ph,{w:"initial",size:"sm",value:f,onChange:function(e){return p(e.currentTarget.value)},children:[{type:"line",displayName:"Line Chart"},{type:"y-bar",displayName:"Bar Chart"}].map((function(e){return(0,g.jsx)("option",{value:e.type,children:e.displayName},e.type)}))})]}),(0,g.jsx)(a.kC,{children:(0,g.jsxs)(a.xv,{color:"gray.500",fontSize:"sm",children:["from ",y," to ",C]})})]}),(0,g.jsx)(a.kC,{h:"300px",maxW:"98%",children:b({selectedBMChartType:f,comparableBMData:{base:t,target:u},singleOnly:h,timeGrain:j})})]})}function b(e){var n=e.selectedBMChartType,t=e.singleOnly,i=e.timeGrain,r=e.comparableBMData,a=null!==r&&void 0!==r?r:{},o=a.base,l=a.target,s=t?[o]:[o,l];return"line"===n?(0,g.jsx)(v,{data:s,timeGrain:i}):"stacked-line"===n?(0,g.jsx)(v,{data:s,timeGrain:i,fill:!0,stacked:!0}):"y-bar"===n?(0,g.jsx)(p,{data:s}):"stacked-y-bar"===n?(0,g.jsx)(p,{data:s,stacked:!0}):"x-bar"===n?(0,g.jsx)(p,{data:s,isHorizontal:!0}):"stacked-x-bar"===n?(0,g.jsx)(p,{data:s,stacked:!0,isHorizontal:!0}):(0,u.Jt)()}},5651:function(e,n,t){t.d(n,{r:function(){return g}});var i=t(82175),r=t(37932),a=t(61431),o=t(3964),l=t(98536),s=t(49143),c=t.n(s),d=t(22513),u=t(55624),h=t(32384),x=t(60767),m=t(78391),f=["columnDatum","chartKind"];function g(e){var n=e.columnDatum,t=n||{},s=t.type,g=t.topk,p=t.histogram,v=t.trues,j=t.falses,b=(0,x.useState)(0),y=(0,a.Z)(b,2),C=y[0],S=y[1],k=c()(v)&&c()(j),O=g&&s,w=p&&s,Z="other"===s,_=k||w||O||Z,T="string"===s?h.d4:"Histogram";function z(e){var n=e.columnDatum,t=e.chartKind,a=(0,r.Z)(e,f);return(0,m.jsx)(u.B,(0,i.Z)((0,i.Z)({px:0,title:null===n||void 0===n?void 0:n.name},a),{},{children:(0,d.SH)(n,t)}))}function F(e){return"string"===typeof e&&["inf","-inf","nan"].includes(e)}return(0,m.jsx)(o.xu,{pb:10,width:"100%",children:_?(0,m.jsxs)(l.mQ,{isLazy:!0,index:C,onChange:function(e){return S(e)},children:[(0,m.jsxs)(l.td,{children:[O&&(0,m.jsx)(l.OK,{children:"Top Categories"}),w&&(0,m.jsx)(l.OK,{children:T}),k&&(0,m.jsx)(l.OK,{children:"Boolean"}),Z&&(0,m.jsx)(l.OK,{children:"Other"})]}),(0,m.jsxs)(l.nP,{children:[O&&(0,m.jsx)(l.x4,{px:0,children:(0,m.jsx)(z,{columnDatum:n,chartKind:"topk"})}),w&&(0,m.jsx)(l.x4,{px:0,children:(0,m.jsx)(z,{columnDatum:n,chartKind:"histogram",minHeight:"300px",maxHeight:"300px"})}),k&&(0,m.jsx)(l.x4,{px:0,children:(0,m.jsx)(z,{columnDatum:n,chartKind:"pie",minHeight:"300px",maxHeight:"300px"})}),Z&&(0,m.jsx)(l.x4,{px:0,children:(0,m.jsx)(z,{columnDatum:n,minHeight:"300px",maxHeight:"300px"})})]})]}):(0,d.y2)({valids:null===n||void 0===n?void 0:n.valids,infinite:F(null===n||void 0===n?void 0:n.max)||F(null===n||void 0===n?void 0:n.min),schema_type:null===n||void 0===n?void 0:n.schema_type})})}},10042:function(e,n,t){t.d(n,{t:function(){return d}});var i=t(3964),r=t(22513),a=t(1839),o=t(23075),l=t(37864),s=t(45759),c=t(78391);function d(e){var n=e.columnDatum,t=e.hasAnimation,d=(0,s.Wx)(n),u=!!t&&{};return(0,c.jsxs)(i.kC,{direction:"column",width:"100%",children:[(0,c.jsx)(i.xu,{h:"2em",flexGrow:1,children:d?(0,c.jsx)(a.Wi,{data:d,animation:u}):(0,r.y2)({})}),(0,c.jsxs)(i.xu,{children:[(0,c.jsx)(o.P,{columnDatum:n,width:"100%"}),(0,c.jsx)(l.Q,{columnDatum:n,width:"100%"})]})]})}},7106:function(e,n,t){t.d(n,{E:function(){return l}});var i=t(3964),r=t(22513),a=t(92318),o=t(78391);function l(e){var n=e.columnDatum;return(0,o.jsx)(i.xu,{width:"100%",children:n?(0,o.jsx)(a.Y,{columnDatum:n,width:"100%"}):(0,r.y2)({})})}},14522:function(e,n,t){t.d(n,{M:function(){return s}});var i=t(3964),r=t(22513),a=t(94182),o=t(55440),l=t(78391);function s(e){var n=e.columnDatum,t=n||{},s=t.p50,c=t.max,d=t.min,u=t.p25,h=t.p75;return(0,l.jsx)(i.xu,{minWidth:"0px",width:"100%",children:n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.xu,{children:(0,l.jsx)(a.UZ,{quantileData:{p50:s,max:c,min:d,p25:u,p75:h}})}),(0,l.jsx)(o.d,{columnDatum:n})]}):(0,r.y2)({})})}},64959:function(e,n,t){t.d(n,{h:function(){return c},k:function(){return s}});var i=t(75607),r=t(3964),a=t(45809),o=t(90197),l=t(78391);function s(e){var n=e.base,t=e.target,i=e.stat,r={};return"execution_time"===i?r=(0,o.U8)(null===n||void 0===n?void 0:n.__runResult,null===t||void 0===t?void 0:t.__runResult,"execution_time","duration"):"row_count"===i&&(r=(0,o.U8)(null===n||void 0===n?void 0:n.__table,null===t||void 0===t?void 0:t.__table,"row_count","decimal")),r}function c(e){var n,t=e.isActive,o=e.negativeChange,c=s(e),d=c.statValueF,u=c.statDiff,h=c.statDiffF,x=(0,a.Mr)("added").color,m=(0,a.Mr)("removed").color,f=(0,a.Mr)("modified").color;return n=u&&u<0?t?"white":o?x:f:t?"white":o?m:f,(0,l.jsxs)(r.xv,{children:[d,"\xa0",u?(0,l.jsxs)(r.xv,{as:"span",color:n,children:[u<0?(0,l.jsx)(i.AS,{}):(0,l.jsx)(i.$l,{}),h]}):(0,l.jsx)(l.Fragment,{})]})}},87483:function(e,n,t){t.d(n,{e0:function(){return o.e},gb:function(){return r.gb},QN:function(){return a.QN},rH:function(){return a.rH},Se:function(){return a.Se},Jt:function(){return i.Jt},im:function(){return i.ch}});t(38771),t(66354),t(55624),t(94182),t(1839),t(10936),t(88696);var i=t(22513),r=(t(10739),t(47086)),a=(t(29795),t(43604)),o=(t(59115),t(5651),t(10042),t(7106),t(68555));t(14522)},83472:function(e,n,t){t.d(n,{B1:function(){return a.B1},FP:function(){return a.FP},Jt:function(){return i.Jt},Se:function(){return i.Se},Uh:function(){return a.Uh},e0:function(){return i.e0},im:function(){return i.im},ll:function(){return a.ll},mq:function(){return r.mq},rH:function(){return i.rH},wC:function(){return a.wC}});var i=t(87483),r=t(38511),a=(t(44295),t(82419),t(23397))},24892:function(e,n,t){t.d(n,{B:function(){return l},Q:function(){return o}});var i=t(60767),r=t(78391),a=(0,i.createContext)(!1),o=function(e){var n=e.cloud,t=e.children;return(0,r.jsx)(a.Provider,{value:n,children:t})};function l(){return(0,i.useContext)(a)}}}]);
//# sourceMappingURL=385.e00c82f8.chunk.js.map