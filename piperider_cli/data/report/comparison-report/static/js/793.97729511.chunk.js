"use strict";(self.webpackChunkpiperider_report=self.webpackChunkpiperider_report||[]).push([[793],{6793:function(e,s,n){n.r(s),n.d(s,{default:function(){return A}});var r=n(885),i=n(8735),t=n(6837),d=n(8625),l=n(3853),c=n(2791),a=n(2010),o=n(6646),u=n(2483),h=n(6523),x=n(2296),j=n(5984),p=n(184);function f(e){var s=e.data;return(0,p.jsx)(i.kC,{direction:"row",flexWrap:"wrap",gap:4,children:Object.keys(s).map((function(e){var n=s[e];return(0,h.h5)(h.a$.safeParse(n)),(0,p.jsx)(x.f,{columnDatum:n},(0,j.x0)())}))})}var m=n(2982),v=n(1413),b=n(7005),g=n(5484),k=n(709);function T(e){var s=e.assertions,n=function(e,s){var n=((null===e||void 0===e?void 0:e.tests)||[]).reduce((function(e,s){return C("PipeRider",s,e)}),{passed:[],failed:[]}),r=n.passed,i=n.failed,t=Object.keys((null===e||void 0===e?void 0:e.columns)||{}).map((function(s){return((null===e||void 0===e?void 0:e.columns[s])||[]).map((function(e){return e}))})).flat().reduce((function(e,s){return C("PipeRider",s,e)}),{passed:[],failed:[]}),d=t.passed,l=t.failed,c=((null===s||void 0===s?void 0:s.tests)||[]).reduce((function(e,s){return C("dbt",s,e)}),{passed:[],failed:[]}),a=c.passed,o=c.failed,u=Object.keys((null===s||void 0===s?void 0:s.columns)||{}).map((function(e){return((null===s||void 0===s?void 0:s.columns[e])||[]).map((function(e){return e}))})).flat().reduce((function(e,s){return C("dbt",s,e)}),{passed:[],failed:[]}),h=u.passed,x=u.failed;return{passedAssertions:[].concat((0,m.Z)(r),(0,m.Z)(d),(0,m.Z)(a),(0,m.Z)(h)),failedAssertions:[].concat((0,m.Z)(i),(0,m.Z)(l),(0,m.Z)(o),(0,m.Z)(x))}}(null===s||void 0===s?void 0:s.piperider,null===s||void 0===s?void 0:s.dbt),r=n.passedAssertions,t=n.failedAssertions;return 0===r.length&&0===t.length?(0,p.jsx)(i.kC,{direction:"column",alignItems:"center",justifyContent:"center",children:(0,p.jsx)(i.xv,{textAlign:"center",children:"No tests available"})}):(0,p.jsx)(i.kC,{direction:"column",gap:4,children:(0,p.jsx)(b.xJ,{children:(0,p.jsxs)(b.iA,{variant:"simple",children:[(0,p.jsx)(b.hr,{children:(0,p.jsxs)(b.Tr,{children:[(0,p.jsx)(b.Th,{children:"Assertion"}),(0,p.jsx)(b.Th,{children:"Status"}),(0,p.jsx)(b.Th,{children:"Expected"}),(0,p.jsx)(b.Th,{children:"Actual"}),(0,p.jsx)(b.Th,{children:"Source"})]})}),(0,p.jsxs)(b.p3,{children:[t.map((function(e){return(0,p.jsxs)(b.Tr,{children:[(0,p.jsx)(b.Td,{children:e.name}),(0,p.jsx)(b.Td,{children:(0,p.jsx)(g.s,{status:e.status})}),(0,p.jsx)(b.Td,{children:(0,k.sG)(e.expected)}),(0,p.jsx)(b.Td,{color:"red.500",children:(0,k.sG)(e.actual)}),(0,p.jsx)(b.Td,{children:e.source})]},e.name)})),r.map((function(e){return(0,p.jsxs)(b.Tr,{children:[(0,p.jsx)(b.Td,{children:e.name}),(0,p.jsx)(b.Td,{children:(0,p.jsx)(g.s,{status:e.status})}),(0,p.jsx)(b.Td,{children:(0,k.sG)(e.expected)}),(0,p.jsx)(b.Td,{children:(0,k.sG)(e.actual)}),(0,p.jsx)(b.Td,{children:e.source})]},e.name)}))]})]})})})}function C(e,s,n){return"passed"===s.status?n.passed.push((0,v.Z)((0,v.Z)({},s),{},{source:e})):n.failed.push((0,v.Z)((0,v.Z)({},s),{},{source:e})),n}var _=n(9113);function Z(e){var s=e.table;return(0,h.h5)(h.vT.safeParse(s)),(0,p.jsxs)(i.kC,{direction:"column",gap:1,mb:8,children:[(0,p.jsx)(i.xv,{color:"gray.500",children:"Table"}),(0,p.jsx)(i.X6,{fontSize:24,children:(0,p.jsxs)(i.kC,{alignItems:"center",children:[(0,p.jsx)(_.JO,{as:l.aCJ,mr:1}),s.name]})}),(0,p.jsx)(i.xv,{fontSize:"sm",children:s.description})]})}var y=n(4821);function A(e){var s,n,x,j,m=e.data,v=e.name,b=m.datasource,g=m.tables[v],C=(0,c.useState)(!1),_=(0,r.Z)(C,2),A=_[0],S=_[1],O=(0,c.useState)(!1),P=(0,r.Z)(O,2),w=P[0],z=P[1],G=0===(null===(s=g.piperider_assertion_result)||void 0===s?void 0:s.tests.length)&&0===Object.keys((null===(n=g.piperider_assertion_result)||void 0===n?void 0:n.columns)||{}).length&&0===(null===(x=g.dbt_assertion_result)||void 0===x?void 0:x.tests.length)&&0===Object.keys((null===(j=g.dbt_assertion_result)||void 0===j?void 0:j.columns)||{}).length;return(0,h.h5)(h.vT.safeParse(g)),(0,h.h5)(y.U0.safeParse(b)),(0,u.j)(v),m?(0,p.jsx)(a.o,{isSingleReport:!0,time:(0,k.D8)(m.created_at),children:(0,p.jsxs)(i.kC,{direction:"column",minH:"calc(100vh + 1px)",width:"100%",children:[(0,p.jsx)(i.kC,{mx:"5%",mt:4,children:(0,p.jsxs)(t.aG,{fontSize:"lg",children:[(0,p.jsx)(t.gN,{children:(0,p.jsx)(d.rU,{href:"/",children:(0,p.jsx)(t.At,{href:"/","data-cy":"sr-report-breadcrumb-back",children:(0,p.jsxs)(i.kC,{alignItems:"center",gap:1,children:[(0,p.jsx)(l.bGz,{})," ",b.name]})})})}),(0,p.jsx)(t.gN,{isCurrentPage:!0,children:(0,p.jsx)(t.At,{href:"#",children:(0,p.jsxs)(i.kC,{alignItems:"center",gap:1,children:[(0,p.jsx)(l.aCJ,{})," ",g.name]})})})]})}),(0,p.jsxs)(i.kC,{border:"1px solid",borderColor:"gray.300",bg:"white",borderRadius:"md",p:6,mt:3,mx:"5%",direction:"column",gap:4,children:[(0,p.jsx)(Z,{table:g}),(0,p.jsx)(i.X6,{size:"md",children:"Assertions"}),(0,p.jsx)(o.S,{in:A,startingHeight:G?50:250,collapseable:!G,onVisible:function(){return S((function(e){return!e}))},children:(0,p.jsx)(T,{assertions:{piperider:g.piperider_assertion_result,dbt:null===g||void 0===g?void 0:g.dbt_assertion_result}})}),(0,p.jsx)(i.X6,{size:"md",mt:4,children:"Columns"}),(0,p.jsx)(o.S,{in:w,startingHeight:0===Object.keys(g.columns).length?50:350,collapseable:Object.keys(g.columns).length>0,onVisible:function(){return z((function(e){return!e}))},children:(0,p.jsx)(f,{data:g.columns})})]})]})}):(0,p.jsx)(a.o,{isSingleReport:!0,time:"-",children:(0,p.jsx)(i.kC,{justifyContent:"center",alignItems:"center",minHeight:"100vh",children:"No profile data found."})})}}}]);
//# sourceMappingURL=793.97729511.chunk.js.map