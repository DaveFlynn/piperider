{
  "title": "SingleReportSchema",
  "type": "object",
  "required": [
    "tables",
    "id",
    "created_at",
    "datasource"
  ],
  "additionalProperties": false,
  "properties": {
    "tables": {
      "patternProperties": {
        ".+": {
          "title": "TableSchema",
          "type": "object",
          "required": [
            "name",
            "description",
            "row_count",
            "col_count",
            "columns",
            "piperider_assertion_result"
          ],
          "additionalProperties": false,
          "properties": {
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            },
            "row_count": {
              "type": "integer"
            },
            "col_count": {
              "type": "integer"
            },
            "columns": {
              "type": "object",
              "patternProperties": {
                ".+": {
                  "title": "ColumnSchema",
                  "type": "object",
                  "required": [
                    "total",
                    "non_nulls",
                    "nulls",
                    "distinct",
                    "name",
                    "description",
                    "type",
                    "schema_type"
                  ],
                  "additionalProperties": false,
                  "properties": {
                    "total": {
                      "description": "the total count of values, regardless validity",
                      "type": "integer"
                    },
                    "nulls": {
                      "description": "the count of values that are null type",
                      "type": "integer"
                    },
                    "non_nulls": {
                      "description": "The count of non null values",
                      "type": "integer"
                    },
                    "distinct": {
                      "description": "The count of distinct kinds of values (e.g. [a,b,c,c] => [a,b,c])",
                      "type": "integer"
                    },
                    "distribution": {
                      "$ref": "#/definitions/distribution"
                    },
                    "histogram": {
                      "$ref": "#/definitions/histogram"
                    },
                    "topk": {
                      "$ref": "#/definitions/topk"
                    },
                    "name": {
                      "description": "name of this column",
                      "type": "string"
                    },
                    "description": {
                      "description": "descriptor of this column",
                      "type": "string"
                    },
                    "type": {
                      "description": "Generic types of schema, python-based",
                      "enum": [
                        "string",
                        "numeric",
                        "integer",
                        "datetime",
                        "date",
                        "time",
                        "boolean",
                        "other"
                      ]
                    },
                    "schema_type": {
                      "description": "The column type definition in SQL database",
                      "type": "string"
                    },
                    "valids": {
                      "description": "the count of values that are non-null and not invalid",
                      "type": "integer"
                    },
                    "invalids": {
                      "description": "the count of values that are non-null and invalid",
                      "type": "integer"
                    },
                    "zeros": {
                      "description": "count of numerical values that equal zero exactly",
                      "type": "integer"
                    },
                    "negatives": {
                      "description": "count of numerical values that are less than zero",
                      "type": "integer"
                    },
                    "positives": {
                      "description": "count of numerical values that are more than zero",
                      "type": "integer"
                    },
                    "zero_length": {
                      "description": "count of string values with zero lengths exactly",
                      "type": "integer"
                    },
                    "non_zero_length": {
                      "description": "count of string values with non-zero lengths",
                      "type": "integer"
                    },
                    "trues": {
                      "description": "count of boolean true values",
                      "type": "integer"
                    },
                    "falses": {
                      "description": "count of boolean false values",
                      "type": "integer"
                    },
                    "duplicates": {
                      "description": "The count of values that are recurring (e.g. [a,b,c,c] => [c,c])",
                      "type": "integer"
                    },
                    "non_duplicates": {
                      "description": "The count of values that are non-recurring (e.g. [a,b,c,c] => [a,b])",
                      "type": "integer"
                    },
                    "profile_duration": {
                      "type": "string"
                    },
                    "elapsed_milli": {
                      "type": "integer"
                    },
                    "sum": {
                      "description": "The sum of all dataset values",
                      "type": "number"
                    },
                    "avg": {
                      "description": "the mean average statistic of dataset",
                      "type": "number"
                    },
                    "stddev": {
                      "description": "the standard deviation statistic of dataset",
                      "type": "number"
                    },
                    "min": {
                      "description": "The minimum value of the dataset's quantiles; can be numerical or datetime string",
                      "oneOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "number"
                        }
                      ]
                    },
                    "max": {
                      "description": "The maximum value of the dataset's quantiles; can be numerical or datetime string",
                      "oneOf": [
                        {
                          "type": "string"
                        },
                        {
                          "type": "number"
                        }
                      ]
                    },
                    "p5": {
                      "description": "The quantile value of the dataset (5th percentile)",
                      "type": "number"
                    },
                    "p25": {
                      "description": "The quantile value of the dataset (25th percentile)",
                      "type": "number"
                    },
                    "p50": {
                      "description": "The quantile value of the dataset (50th percentile)",
                      "type": "number"
                    },
                    "p75": {
                      "description": "The quantile value of the dataset (75th percentile)",
                      "type": "number"
                    },
                    "p95": {
                      "description": "The quantile value of the dataset (95th percentile)",
                      "type": "number"
                    }
                  }
                }
              }
            },
            "piperider_assertion_result": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "title": "PipeRiderAssertionResult",
                  "type": "object",
                  "required": [
                    "tests",
                    "columns"
                  ],
                  "additionalProperties": false,
                  "properties": {
                    "tests": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/assertion_test"
                      }
                    },
                    "columns": {
                      "type": "object",
                      "patternProperties": {
                        ".+": {
                          "type": "array",
                          "items": {
                            "$ref": "#/definitions/assertion_test"
                          }
                        }
                      }
                    }
                  }
                }
              ]
            },
            "dbt_assertion_result": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "title": "DbtAssertionResult",
                  "type": "object",
                  "required": [
                    "tests",
                    "columns"
                  ],
                  "additionalProperties": false,
                  "properties": {
                    "tests": {
                      "type": "array",
                      "items": {
                        "$ref": "#/definitions/assertion_test"
                      }
                    },
                    "columns": {
                      "type": "object",
                      "patternProperties": {
                        ".+": {
                          "type": "array",
                          "items": {
                            "$ref": "#/definitions/assertion_test"
                          }
                        }
                      }
                    }
                  }
                }
              ]
            }
          }
        }
      }
    },
    "id": {
      "type": "string"
    },
    "created_at": {
      "type": "string"
    },
    "datasource": {
      "title": "DataSource",
      "type": "object",
      "required": [
        "name",
        "type"
      ],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string"
        }
      }
    }
  },
  "definitions": {
    "distribution": {
      "title": "Distribution",
      "type": "object",
      "required": [
        "type",
        "labels",
        "counts"
      ],
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string"
        },
        "labels": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "counts": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "bin_edges": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      }
    },
    "histogram": {
      "title": "Histogram",
      "type": "object",
      "required": [
        "labels",
        "counts",
        "bin_edges"
      ],
      "additionalProperties": false,
      "properties": {
        "labels": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "counts": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        },
        "bin_edges": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "number"
              },
              {
                "type": "string"
              }
            ]
          }
        }
      }
    },
    "topk": {
      "description": "The statistical mode value of the most common or frequent value",
      "title": "Topk",
      "type": "object",
      "required": [
        "values",
        "counts"
      ],
      "additionalProperties": false,
      "properties": {
        "values": {
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "integer"
              }
            ]
          }
        },
        "counts": {
          "type": "array",
          "items": {
            "type": "integer"
          }
        }
      }
    },
    "assertion_test": {
      "title": "AssertionTest",
      "type": "object",
      "required": [
        "name",
        "status"
      ],
      "additionalProperties": false,
      "properties": {
        "name": {
          "type": "string"
        },
        "status": {
          "enum": [
            "passed",
            "failed"
          ]
        },
        "parameters": {
          "type": "object"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "expected": {},
        "actual": {}
      }
    }
  }
}